# Pre-requesite

## Dependencies

### Open Community Runtime (OCR)

HCLIB is a library layer built on top of existing runtimes. This distribution 
contains an implementation of HCLIB built on top of the Open Community Runtime 
that must be installed separetely. Be careful to build OCR with ELS support 
enabled for one slot.

OCR is available from <https://01.org/projects/open-community-runtime>

1. Clone the OCR repository:

    git clone https://github.com/01org/ocr.git
    cd ocr
    git branch ocr-hclib --track origin/ocr-hclib
    git checkout ocr-hclib

2.  Build OCR with ELS and runtime API support:

    OCR_CONF_OPTS="--enable-els=1 --enable-rtapi --enable-ocrlib" ./install.sh 

By default, OCR is installed in the current folder, under `ocr-install/`

3.  Setup your environment:

    export OCR_ROOT=${PWD}/ocr-install
    export LD_LIBRARY_PATH=${OCR_ROOT}/lib:${LD_LIBRARY_PATH}

# HCLIB Install Instructions

HCLIB relies on autotools as a build system. You can either invoke `configure` 
and `make` directly if familiar with, or use the provided installation script. 
Note that the installation script runs the whole tool chain and is overkill 
to recompile the library when updating code.

## Installation

1. Clone the HCLIB repository:

    git clone https://github.com/vcave/hclib.git
    cd hclib

2.  Build HCLIB
    
    ./install.sh

By default, HCLIB is installed in the current folder, under `hclib-install/`

3.  Setup your environment:

Defining the `HCLIB_ROOT` environment variable and updating the `LD_LIBRARY_PATH` 
is optional but comes handy when writing compiler command lines.

    export HCLIB_ROOT=$PWD/hclib-install
    export LD_LIBRARY_PATH=${OCR_ROOT}/lib:${HCLIB_ROOT}/lib:${LD_LIBRARY_PATH}
    export OCR_CONFIG=${OCR_ROOT}/config/default.cfg

Note: OCR_CONFIG points to the OCR configuration file from which you can set the number of OCR workers.

You're done ! Check the `README` file for more information on using HCLIB

## Installation with phaser support

HClib can optionally link with a 'phaserLib' installation to enable utilization
of the phaser construct in HClib source files.

1. Set the PHASERLIB_ROOT environment variable to point to the path for an installation 
of 'phaserLib'. 
    
    export PHASERLIB_ROOT=/path/to/phaserLib/install

2. Invoking HClib's install script with PHASERLIB_ROOT defined automatically makes 
HClib link with the phaserLib library.
     
     ./install.sh

If you're not relying on the install script, you need to invoke configure with 
the '--with-phaser=/path/to/phaserLib/install' option to specify the location of
a 'phaserLib' installation.

